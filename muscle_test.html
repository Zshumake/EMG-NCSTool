<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 Muscle Anatomy Test - Color & Controls</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f8f8; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .test-result { padding: 15px; margin: 10px 0; border-radius: 8px; font-weight: bold; }
        .pass { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 2px solid #bee5eb; }
        button { margin: 10px; padding: 15px 25px; cursor: pointer; background: #00a19b; color: white; border: none; border-radius: 8px; font-size: 16px; }
        button:hover { background: #0d7377; }
        .preview { border: 2px solid #ddd; border-radius: 8px; margin: 20px 0; padding: 15px; background: white; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧪 Enhanced Muscle Anatomy Test</h1>
        <div id="test-results"></div>
        
        <div style="margin-top: 30px;">
            <button onclick="runTests()">🚀 Test Enhanced Features</button>
            <button onclick="openMainTool()">📱 Open Main Tool</button>
            <button onclick="showColorPreview()">🎨 Preview Colors</button>
        </div>
        
        <div id="color-preview" class="preview" style="display: none;">
            <h3>🎨 Color Theme Preview</h3>
            <div style="margin: 20px 0;">
                <div style="padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; margin: 10px 0; text-align: center; font-weight: bold;">
                    💪 UPPER EXTREMITY - Purple Gradient Theme
                </div>
                <div style="padding: 15px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border-radius: 12px; margin: 10px 0; text-align: center; font-weight: bold;">
                    🦵 LOWER EXTREMITY - Pink/Orange Gradient Theme
                </div>
            </div>
            <div style="margin: 20px 0;">
                <h4>Individual Detail Types:</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                    <div style="padding: 8px 15px; background: rgba(40, 167, 69, 0.1); border-left: 4px solid #28a745; border-radius: 8px;">
                        <strong>Nerve:</strong> Green theme
                    </div>
                    <div style="padding: 8px 15px; background: rgba(255, 193, 7, 0.1); border-left: 4px solid #ffc107; border-radius: 8px;">
                        <strong>Roots:</strong> Yellow theme
                    </div>
                    <div style="padding: 8px 15px; background: rgba(23, 162, 184, 0.1); border-left: 4px solid #17a2b8; border-radius: 8px;">
                        <strong>Cord:</strong> Blue theme
                    </div>
                    <div style="padding: 8px 15px; background: rgba(220, 53, 69, 0.1); border-left: 4px solid #dc3545; border-radius: 8px;">
                        <strong>Actions:</strong> Red theme
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }
        
        function runTests() {
            document.getElementById('test-results').innerHTML = '';
            addResult('🔍 Testing enhanced muscle anatomy features...', 'info');
            
            fetch('./ncs_emg_tool_v2.html')
                .then(response => response.text())
                .then(content => {
                    // Test 1: Check for enhanced color scheme
                    if (content.includes('linear-gradient(135deg, #667eea') && 
                        content.includes('linear-gradient(135deg, #f093fb')) {
                        addResult('✅ Enhanced color gradients implemented (Purple for Upper, Pink for Lower)', 'pass');
                    } else {
                        addResult('❌ Enhanced color gradients missing', 'fail');
                    }
                    
                    // Test 2: Check for individual muscle controls
                    if (content.includes('toggleMuscleDetail') && 
                        content.includes('showAllMuscleDetails') && 
                        content.includes('muscle-controls')) {
                        addResult('✅ Individual muscle detail controls implemented', 'pass');
                    } else {
                        addResult('❌ Individual muscle controls missing', 'fail');
                    }
                    
                    // Test 3: Check for individual control buttons
                    if (content.includes('🟢 N') && 
                        content.includes('🟡 R') && 
                        content.includes('🔴 A') &&
                        content.includes('👁️ All')) {
                        addResult('✅ Individual control buttons for each muscle (N/R/C/A/All)', 'pass');
                    } else {
                        addResult('❌ Individual control buttons missing', 'fail');
                    }
                    
                    // Test 4: Check for proper initialization
                    if (content.includes('currentAnatomyType = \'lower\'') && 
                        content.includes('case 5:') && 
                        content.includes('this.initializeAnatomy()')) {
                        addResult('✅ Muscle anatomy initializes properly on first load', 'pass');
                    } else {
                        addResult('❌ Initialization may have issues', 'fail');
                    }
                    
                    // Test 5: Check for data structure with muscle IDs
                    if (content.includes('data-muscle-id') && 
                        content.includes('data-muscle=') && 
                        content.includes('muscle-${region}-${index}')) {
                        addResult('✅ Individual muscle identification system implemented', 'pass');
                    } else {
                        addResult('❌ Muscle identification system incomplete', 'fail');
                    }
                    
                    // Test 6: Check for enhanced control panel
                    if (content.includes('hide-reveal-controls') && 
                        content.includes('Toggle Nerves') && 
                        content.includes('control-btn individual')) {
                        addResult('✅ Global control panel with themed controls', 'pass');
                    } else {
                        addResult('❌ Global control panel missing', 'fail');
                    }
                    
                    addResult('🎯 All tests completed! Enhanced muscle anatomy with individual controls is ready.', 'info');
                })
                .catch(error => {
                    addResult('❌ Error testing features: ' + error.message, 'fail');
                });
        }
        
        function openMainTool() {
            window.open('./ncs_emg_tool_v2.html', '_blank');
            addResult('📱 Opening main tool - Navigate to Muscle Anatomy tab to see enhancements!', 'info');
        }
        
        function showColorPreview() {
            const preview = document.getElementById('color-preview');
            preview.style.display = preview.style.display === 'none' ? 'block' : 'none';
        }
        
        // Auto-run tests
        setTimeout(runTests, 500);
    </script>
</body>
</html>